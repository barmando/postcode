<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PC4 – Noord‑Brabant (Leaflet)</title>
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <style>
    html, body { height: 100%; margin: 0; }
    #map { height: 100%; }
    .panel { position: absolute; z-index: 1000; left: 12px; top: 12px; background: rgba(255,255,255,0.95); border: 1px solid #e5e7eb; border-radius: 14px; padding: 12px 14px; box-shadow: 0 6px 18px rgba(0,0,0,0.08); font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
    .panel h1 { font-size: 16px; margin: 0 0 6px; }
    .panel p { margin: 0 0 8px; font-size: 13px; color: #4b5563; }
    .legend-item { display: flex; align-items: center; gap: 8px; font-size: 13px; margin: 6px 0; }
    .dot { width: 10px; height: 10px; border-radius: 50%; flex: 0 0 10px; }
    .footer { position: absolute; right: 12px; bottom: 12px; z-index: 1000; background: rgba(255,255,255,0.95); border: 1px solid #e5e7eb; border-radius: 999px; padding: 6px 10px; font-size: 12px; color: #4b5563; }
  </style>
</head>
<body>
  <div id="map"></div>

  <div class="panel">
    <h1>Postcode 4 – Noord‑Brabant</h1>
    <p>GeoJSON wordt geladen uit <code>cbs_postcode4_brabant.geojson</code> (zelfde map als deze pagina).</p>
    <div class="legend-item"><span class="dot" style="background:#2563eb"></span><span>PC4-polygonen</span></div>
  </div>

  <div class="footer">© OpenStreetMap contributors</div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script>
    // 1) Basiskaart
    const map = L.map('map', { scrollWheelZoom: true });
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // 2) GeoJSON pad (relatief, staat in dezelfde directory als index.html)
    const GEOJSON_URL = 'cbs_postcode4_brabant.geojson';

    // 3) Stijl voor de PC4-vlakken
    const layerStyle = { color: '#2563eb', weight: 1, fillColor: '#2563eb', fillOpacity: 0.15 };

    // 4) Laden en tonen
    fetch(GEOJSON_URL)
      .then(r => {
        if (!r.ok) throw new Error('HTTP '+r.status);
        return r.json();
      })
      .then(data => {
        const pc4 = L.geoJSON(data, {
          style: layerStyle,
          onEachFeature: (f, lyr) => {
            const pc4 = f.properties.pc4 ?? f.properties.PC4 ?? f.properties.postcode4;
            lyr.bindPopup(pc4 ? `PC4: <strong>${pc4}</strong>` : 'PC4');
          }
        }).addTo(map);
        map.fitBounds(pc4.getBounds().pad(0.05));
      })
      .catch(err => {
        console.error('GeoJSON laden mislukt:', err);
        alert('Kon cbs_postcode4_brabant.geojson niet laden. Controleer bestandsnaam/locatie.');
      });
  </script>
</body>
</html>
