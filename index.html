<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Postcodezones – Altena, Waalwijk, Heusden, Loon op Zand, Dongen</title>
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <style>
    html, body { height: 100%; margin: 0; }
    #map { height: 100%; }
    .panel { position: absolute; z-index: 1000; left: 12px; top: 12px; background: rgba(255,255,255,0.95); border: 1px solid #e5e7eb; border-radius: 14px; padding: 12px 14px; box-shadow: 0 6px 18px rgba(0,0,0,0.08); font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
    .panel h1 { font-size: 16px; margin: 0 0 6px; }
    .panel p { margin: 0 0 8px; font-size: 13px; color: #4b5563; }
    .legend-item { display: flex; align-items: center; gap: 8px; font-size: 13px; margin: 6px 0; }
    .dot { width: 10px; height: 10px; border-radius: 50%; flex: 0 0 10px; }
    .footer { position: absolute; right: 12px; bottom: 12px; z-index: 1000; background: rgba(255,255,255,0.95); border: 1px solid #e5e7eb; border-radius: 999px; padding: 6px 10px; font-size: 12px; color: #4b5563; }
    .controls { margin-top: 8px; border-top: 1px solid #e5e7eb; padding-top: 8px; }
    .controls label { display: flex; align-items: center; gap: 8px; font-size: 13px; margin: 4px 0; cursor: pointer; }
    .note { font-size: 11px; color: #6b7280; margin-top: 8px; }
  </style>
</head>
<body>
  <div id="map"></div>

  <div class="panel">
    <h1>Postcodezones</h1>
    <p>Klik op een zone voor details. Vink aan/uit om te tonen/verbergen.</p>
    <div id="legend"></div>
    <div class="controls" id="controls"></div>
    <div class="note">NB: "Loop op Zand" is geïnterpreteerd als <strong>Loon op Zand</strong>. Zones zijn indicatief.</div>
  </div>

  <div class="footer">© OpenStreetMap contributors</div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script>
    // Configuratie: zones met postcode-reeksen (indicatieve cirkels)
    const ZONES = [
      { name: 'Altena',     postcodes: ['4250–4255', '4260–4269', '4270–4273', '4280–4288'], center: [51.78, 4.94], radius: 14000, color: '#2563eb' },
      { name: 'Waalwijk',   postcodes: ['5141–5149'],                                             center: [51.69, 5.07], radius: 7000,  color: '#16a34a' },
      { name: 'Heusden',    postcodes: ['5150–5154', '5250–5256'],                               center: [51.70, 5.17], radius: 9000,  color: '#e11d48' },
      { name: 'Loon op Zand', postcodes: ['5170–5176'],                                          center: [51.63, 5.07], radius: 6000,  color: '#9333ea' },
      { name: 'Dongen',     postcodes: ['5100–5109'],                                             center: [51.63, 4.94], radius: 6000,  color: '#f59e0b' },
    ];

    // Kaart aanmaken
    const map = L.map('map', { scrollWheelZoom: true });
    const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Lagen per zone + bounds verzamelen
    const layers = {};
    const allLatLngs = [];

    ZONES.forEach(z => {
      const circle = L.circle(z.center, {
        radius: z.radius,
        color: z.color,
        fillColor: z.color,
        fillOpacity: 0.25,
        weight: 2
      }).bindPopup(`
        <div style="font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;">
          <div style="font-weight:600; margin-bottom:4px;">${z.name}</div>
          <div style="font-size:12px; color:#374151;">Postcodes: ${z.postcodes.join(', ')}</div>
          <div style="font-size:11px; color:#6b7280; margin-top:4px;">(Indicatieve zone voor visualisatie)</div>
        </div>
      `);
      circle.addTo(map);
      layers[z.name] = circle;

      // Verzamel punten voor fitBounds (maak een klein vierkant rond het centrum)
      const lat = z.center[0], lng = z.center[1];
      const d = 0.06; // ruwweg ~6-7 km
      allLatLngs.push([lat - d, lng - d], [lat - d, lng + d], [lat + d, lng - d], [lat + d, lng + d]);
    });

    // Fit alle zones in beeld
    const bounds = L.latLngBounds(allLatLngs);
    map.fitBounds(bounds.pad(0.2));

    // Legend + toggles
    const legendEl = document.getElementById('legend');
    const controlsEl = document.getElementById('controls');

    ZONES.forEach(z => {
      // legenda
      const item = document.createElement('div');
      item.className = 'legend-item';
      item.innerHTML = `<span class="dot" style="background:${z.color}"></span><span><strong>${z.name}:</strong> ${z.postcodes.join(', ')}</span>`;
      legendEl.appendChild(item);

      // toggle
      const id = `chk-${z.name.replace(/\s+/g,'-').toLowerCase()}`;
      const label = document.createElement('label');
      label.innerHTML = `<input id="${id}" type="checkbox" checked /> <span>${z.name} tonen</span>`;
      controlsEl.appendChild(label);
      label.querySelector('input').addEventListener('change', (e) => {
        if (e.target.checked) {
          layers[z.name].addTo(map);
        } else {
          map.removeLayer(layers[z.name]);
        }
      });
    });
  </script>
</body>
</html>
